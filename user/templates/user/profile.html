{% extends "base.html" %}

{% block content %}

{% load staticfiles %}
<link rel="stylesheet" href="{% static 'user/profile.css' %}">
<script src="{% static 'user/profile.js' %}"></script>

<div class="container">
  <h3 class="black-text">Profile</h3>
  <hr>
  
  <!-- Display User's Account Details -->
  <h5 class="activator grey-text text-darken-4">Account Details</h5>
  <div class="card grey lighten-5">
    <div class="card-content">
      <span class="black-text">Username:</span> <span class="grey-text text-darken-1">{{ profile.user.username }}</span>
      <br>
      <span class="black-text">Email:</span> <span class="grey-text text-darken-1">{{ profile.user.email }}</span>
    </div>
  </div>
  <div>
      <form name="pantry" id="pantry_form" action="{% url 'user.profile' %}" method="POST">
        {% csrf_token %}
        <h4>Pantry</h4>
        <input type="hidden" id="ingredient_objects" name="ingredient_objects" value="[]"/>
        <input type="hidden" id="deleted_ingredients" name="deleted_ingredients" value="[]"/>
        <div id="inventoryButtons">
          {% for ingredient in userIngredients %}
            <!-- Add the Ingredient Row template -->
            {% include 'ingredients/ingredientRow.html' %}
          {% empty %}
            <!-- User doesn't have any ingredients -->
            You have no selected ingredients.
          {% endfor %}
          <button type="submit" name="submitIngredients" class="waves-effect waves-light btn blue">
            Update Pantry
            <i class="material-icons right">send</i>
          </button>
        </div>
      </form>
  </div>
  <div class="row">
    <div class="col s12">
      <ul class="tabs grey lighten-5 z-depth-1">
        <li class="tab col s3"><a class="active black-text" href="#favoriteRecipes">Favorites</a></li>
        <li class="tab col s3"><a class="black-text" href="#createdRecipes">Created</a></li>
      </ul>
    </div>
    <div id="favoriteRecipes" class="col s12">
      <!-- Display a list of User's Favorited Recipes -->
      {% for recipe in profile.favorites.all %}
        <!-- Add the Recipe Row template -->
        {% include 'recipes/recipeRow.html' %}
      {% empty %}
        <!-- User doesn't have any Favorited Recipes -->
        There are no Favorite Recipes.
      {% endfor %}
    </div>
    <div id="createdRecipes" class="col s12">
      <!-- Display a list of User's Created Recipes  -->
      {% for recipe in profile.created_recipes.all %}
        <!-- Add the Recipe Row template -->
        {% include 'recipes/recipeRow.html' %}
      {% empty %}
        <!-- User doesn't have any Create Recipes -->
        There are no Created Recipes.
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}